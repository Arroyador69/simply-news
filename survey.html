<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Personalize Your Experience - Simply News</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header */
        header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 1rem 0;
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 20px rgba(0,0,0,0.1);
        }

        nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: bold;
            color: #667eea;
        }

        .back-link {
            color: #667eea;
            text-decoration: none;
            font-weight: 500;
        }

        .back-link:hover {
            text-decoration: underline;
        }

        /* Survey Section */
        .survey {
            padding: 120px 0 80px;
            background: white;
            min-height: 100vh;
        }

        .survey-header {
            text-align: center;
            margin-bottom: 3rem;
        }

        .survey-title {
            font-size: 2.5rem;
            color: #333;
            margin-bottom: 1rem;
        }

        .survey-subtitle {
            font-size: 1.2rem;
            color: #666;
            max-width: 700px;
            margin: 0 auto;
        }

        .survey-form {
            background: #f8f9fa;
            padding: 2rem;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .form-group {
            margin-bottom: 2rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: #333;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .checkbox-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }

        .checkbox-item {
            display: flex;
            align-items: center;
            cursor: pointer;
            padding: 10px;
            border-radius: 8px;
            transition: background-color 0.3s ease;
        }

        .checkbox-item:hover {
            background-color: #e9ecef;
        }

        .checkbox-item input[type="checkbox"] {
            width: auto;
            margin-right: 10px;
            transform: scale(1.2);
        }

        /* Search functionality */
        .search-container {
            margin-top: 1rem;
            display: none;
        }

        .search-container.active {
            display: block;
        }

        .search-input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            font-size: 1rem;
            margin-bottom: 1rem;
        }

        .search-results {
            max-height: 200px;
            overflow-y: auto;
            border: 1px solid #e1e5e9;
            border-radius: 8px;
            background: white;
        }

        .search-result-item {
            padding: 10px 15px;
            cursor: pointer;
            border-bottom: 1px solid #f0f0f0;
            transition: background-color 0.3s ease;
        }

        .search-result-item:hover {
            background-color: #f8f9fa;
        }

        .search-result-item:last-child {
            border-bottom: none;
        }

        /* Selected sources display */
        .selected-sources {
            margin-top: 1rem;
            padding: 1rem;
            background: #f8f9fa;
            border-radius: 8px;
            border: 2px solid #e9ecef;
            display: none;
        }

        .selected-sources.show {
            display: block;
        }

        .selected-sources h4 {
            margin: 0 0 0.5rem 0;
            color: #495057;
            font-size: 1rem;
        }

        .selected-sources-list {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .selected-source-tag {
            background: #667eea;
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 15px;
            font-size: 0.875rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .remove-source {
            background: none;
            border: none;
            color: white;
            cursor: pointer;
            font-size: 1rem;
            padding: 0;
            opacity: 0.8;
        }

        .remove-source:hover {
            opacity: 1;
        }

        .submit-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            margin-top: 1rem;
        }

        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
        }

        .submit-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .success-message {
            text-align: center;
            padding: 3rem;
            background: #d4edda;
            border-radius: 15px;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .success-message h3 {
            font-size: 2rem;
            margin-bottom: 1rem;
            color: #155724;
        }

        .success-message p {
            font-size: 1.1rem;
            margin-bottom: 2rem;
        }

        .cta-button {
            display: inline-block;
            background: #667eea;
            color: white;
            padding: 15px 30px;
            text-decoration: none;
            border-radius: 50px;
            font-weight: bold;
            font-size: 1.1rem;
            transition: all 0.3s ease;
        }

        .cta-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
        }

        .loading {
            display: none;
            text-align: center;
            padding: 2rem;
        }

        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 1rem;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Responsive */
        @media (max-width: 768px) {
            .survey-title {
                font-size: 2rem;
            }
            
            .survey-subtitle {
                font-size: 1rem;
            }
            
            .checkbox-group {
                grid-template-columns: 1fr;
            }
            
            .survey-form {
                padding: 1.5rem;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <nav class="container">
            <div class="logo">Simply News</div>
            <a href="index.html" class="back-link">â† Back to Home</a>
        </nav>
    </header>

    <!-- Survey Section -->
    <section class="survey">
        <div class="container">
            <div class="survey-header">
                <h1 class="survey-title">Personalize Your Experience</h1>
                <p class="survey-subtitle">Help us send you the news that interests you most. With this information, we can create a personalized news flow tailored to your preferences.</p>
            </div>
            
            <form id="preferencesForm" class="survey-form">
                <div class="form-group">
                    <label for="name">Full Name: *</label>
                    <input type="text" id="name" name="name" required>
                </div>
                
                <div class="form-group">
                    <label for="email">Email: *</label>
                    <input type="email" id="email" name="email" required>
                </div>
                
                <div class="form-group">
                    <label for="telegram">Telegram Username (optional):</label>
                    <input type="text" id="telegram" name="telegram" placeholder="@your_username">
                </div>
                
                <div class="form-group">
                    <label>What topics interest you most? (select all that apply): *</label>
                    <div class="checkbox-group">
                        <label class="checkbox-item">
                            <input type="checkbox" name="interests" value="business">
                            Business
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" name="interests" value="entertainment">
                            Entertainment
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" name="interests" value="general">
                            General News
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" name="interests" value="health">
                            Health
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" name="interests" value="science">
                            Science
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" name="interests" value="sports">
                            Sports
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" name="interests" value="technology">
                            Technology
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" name="interests" value="cybersecurity">
                            Cybersecurity
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" name="interests" value="geopolitics">
                            Geopolitics
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" name="interests" value="ai">
                            Artificial Intelligence
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" name="interests" value="other" id="otherCheckbox">
                            Other
                        </label>
                    </div>
                    
                    <!-- Search container for "Other" option -->
                    <div id="searchContainer" class="search-container">
                        <input type="text" id="searchInput" class="search-input" placeholder="Choose another topic...">
                        <div id="searchResults" class="search-results" style="display: none;"></div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="country_interest">Country of interest: *</label>
                    <select id="country_interest" name="country_interest" required>
                        <option value="">Select your country</option>
                        <option value="ar">ğŸ‡¦ğŸ‡· Argentina</option>
                        <option value="au">ğŸ‡¦ğŸ‡º Australia</option>
                        <option value="at">ğŸ‡¦ğŸ‡¹ Austria</option>
                        <option value="be">ğŸ‡§ğŸ‡ª Belgium</option>
                        <option value="br">ğŸ‡§ğŸ‡· Brazil</option>
                        <option value="bg">ğŸ‡§ğŸ‡¬ Bulgaria</option>
                        <option value="ca">ğŸ‡¨ğŸ‡¦ Canada</option>
                        <option value="cn">ğŸ‡¨ğŸ‡³ China</option>
                        <option value="co">ğŸ‡¨ğŸ‡´ Colombia</option>
                        <option value="cu">ğŸ‡¨ğŸ‡º Cuba</option>
                        <option value="cz">ğŸ‡¨ğŸ‡¿ Czech Republic</option>
                        <option value="eg">ğŸ‡ªğŸ‡¬ Egypt</option>
                        <option value="fr">ğŸ‡«ğŸ‡· France</option>
                        <option value="de">ğŸ‡©ğŸ‡ª Germany</option>
                        <option value="gr">ğŸ‡¬ğŸ‡· Greece</option>
                        <option value="hk">ğŸ‡­ğŸ‡° Hong Kong</option>
                        <option value="hu">ğŸ‡­ğŸ‡º Hungary</option>
                        <option value="in">ğŸ‡®ğŸ‡³ India</option>
                        <option value="id">ğŸ‡®ğŸ‡© Indonesia</option>
                        <option value="ie">ğŸ‡®ğŸ‡ª Ireland</option>
                        <option value="il">ğŸ‡®ğŸ‡± Israel</option>
                        <option value="it">ğŸ‡®ğŸ‡¹ Italy</option>
                        <option value="jp">ğŸ‡¯ğŸ‡µ Japan</option>
                        <option value="lv">ğŸ‡±ğŸ‡» Latvia</option>
                        <option value="lt">ğŸ‡±ğŸ‡¹ Lithuania</option>
                        <option value="my">ğŸ‡²ğŸ‡¾ Malaysia</option>
                        <option value="mx">ğŸ‡²ğŸ‡½ Mexico</option>
                        <option value="ma">ğŸ‡²ğŸ‡¦ Morocco</option>
                        <option value="nl">ğŸ‡³ğŸ‡± Netherlands</option>
                        <option value="nz">ğŸ‡³ğŸ‡¿ New Zealand</option>
                        <option value="ng">ğŸ‡³ğŸ‡¬ Nigeria</option>
                        <option value="no">ğŸ‡³ğŸ‡´ Norway</option>
                        <option value="ph">ğŸ‡µğŸ‡­ Philippines</option>
                        <option value="pl">ğŸ‡µğŸ‡± Poland</option>
                        <option value="pt">ğŸ‡µğŸ‡¹ Portugal</option>
                        <option value="ro">ğŸ‡·ğŸ‡´ Romania</option>
                        <option value="ru">ğŸ‡·ğŸ‡º Russia</option>
                        <option value="sa">ğŸ‡¸ğŸ‡¦ Saudi Arabia</option>
                        <option value="rs">ğŸ‡·ğŸ‡¸ Serbia</option>
                        <option value="sg">ğŸ‡¸ğŸ‡¬ Singapore</option>
                        <option value="sk">ğŸ‡¸ğŸ‡° Slovakia</option>
                        <option value="si">ğŸ‡¸ğŸ‡® Slovenia</option>
                        <option value="za">ğŸ‡¿ğŸ‡¦ South Africa</option>
                        <option value="kr">ğŸ‡°ğŸ‡· South Korea</option>
                        <option value="se">ğŸ‡¸ğŸ‡ª Sweden</option>
                        <option value="ch">ğŸ‡¨ğŸ‡­ Switzerland</option>
                        <option value="tw">ğŸ‡¹ğŸ‡¼ Taiwan</option>
                        <option value="th">ğŸ‡¹ğŸ‡­ Thailand</option>
                        <option value="tr">ğŸ‡¹ğŸ‡· Turkey</option>
                        <option value="ua">ğŸ‡ºğŸ‡¦ Ukraine</option>
                        <option value="ae">ğŸ‡¦ğŸ‡ª United Arab Emirates</option>
                        <option value="gb">ğŸ‡¬ğŸ‡§ United Kingdom</option>
                        <option value="us">ğŸ‡ºğŸ‡¸ United States</option>
                        <option value="ve">ğŸ‡»ğŸ‡ª Venezuela</option>
                    </select>
                </div>
                <!-- Idioma dropdown (solo si el paÃ­s tiene mÃ¡s de un idioma en NewsAPI) -->
                <div class="form-group" id="language-group" style="display:none;">
                    <label for="language_interest">Language: *</label>
                    <select id="language_interest" name="language_interest" required>
                        <!-- Opciones dinÃ¡micas -->
                    </select>
                </div>
                <!-- Sources dropdown/list -->
                <div class="form-group" id="sources-group" style="display:none;">
                    <label for="sources">Preferred news sources (select all that apply):</label>
                    <div class="checkbox-group" id="sources-checkboxes">
                        <!-- Las fuentes se llenarÃ¡n dinÃ¡micamente segÃºn el paÃ­s/idioma -->
                    </div>
                    
                    <!-- Selected sources display -->
                    <div class="selected-sources" id="selected-sources">
                        <h4>Your Selected Sources:</h4>
                        <div class="selected-sources-list" id="selected-sources-list">
                            <!-- Las fuentes seleccionadas aparecerÃ¡n aquÃ­ -->
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="frequency">How often would you like to receive news? *</label>
                    <select id="frequency" name="frequency" required>
                        <option value="">Select an option</option>
                        <option value="daily">Daily</option>
                        <option value="weekly">Weekly</option>
                        <option value="important">Only important news</option>
                        <option value="custom">Custom</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="country_timezone">Country and time zone: *</label>
                    <select id="country_timezone" name="country_timezone" required>
                        <option value="">Select your country and time zone</option>
                        <option value="ğŸ‡¦ğŸ‡« Afghanistan|Asia/Kabul">ğŸ‡¦ğŸ‡« Afghanistan (UTC+4:30)</option>
                        <option value="ğŸ‡¦ğŸ‡± Albania|Europe/Tirane">ğŸ‡¦ğŸ‡± Albania (UTC+1)</option>
                        <option value="ğŸ‡©ğŸ‡¿ Algeria|Africa/Algiers">ğŸ‡©ğŸ‡¿ Algeria (UTC+1)</option>
                        <option value="ğŸ‡¦ğŸ‡¸ American Samoa|Pacific/Pago_Pago">ğŸ‡¦ğŸ‡¸ American Samoa (UTC-11)</option>
                        <option value="ğŸ‡¦ğŸ‡© Andorra|Europe/Andorra">ğŸ‡¦ğŸ‡© Andorra (UTC+1)</option>
                        <option value="ğŸ‡¦ğŸ‡´ Angola|Africa/Luanda">ğŸ‡¦ğŸ‡´ Angola (UTC+1)</option>
                        <option value="ğŸ‡¦ğŸ‡® Anguilla|America/Anguilla">ğŸ‡¦ğŸ‡® Anguilla (UTC-4)</option>
                        <option value="ğŸ‡¦ğŸ‡¶ Antarctica|Antarctica/Casey">ğŸ‡¦ğŸ‡¶ Antarctica (UTC+8)</option>
                        <option value="ğŸ‡¦ğŸ‡¬ Antigua & Barbuda|America/Antigua">ğŸ‡¦ğŸ‡¬ Antigua & Barbuda (UTC-4)</option>
                        <option value="ğŸ‡¦ğŸ‡· Argentina|America/Argentina/Buenos_Aires">ğŸ‡¦ğŸ‡· Argentina (UTC-3)</option>
                        <option value="ğŸ‡¦ğŸ‡² Armenia|Asia/Yerevan">ğŸ‡¦ğŸ‡² Armenia (UTC+4)</option>
                        <option value="ğŸ‡¦ğŸ‡¼ Aruba|America/Aruba">ğŸ‡¦ğŸ‡¼ Aruba (UTC-4)</option>
                        <option value="ğŸ‡¦ğŸ‡º Australia|Australia/Sydney">ğŸ‡¦ğŸ‡º Australia (UTC+10)</option>
                        <option value="ğŸ‡¦ğŸ‡¹ Austria|Europe/Vienna">ğŸ‡¦ğŸ‡¹ Austria (UTC+1)</option>
                        <option value="ğŸ‡¦ğŸ‡¿ Azerbaijan|Asia/Baku">ğŸ‡¦ğŸ‡¿ Azerbaijan (UTC+4)</option>
                        <option value="ğŸ‡§ğŸ‡¸ Bahamas|America/Nassau">ğŸ‡§ğŸ‡¸ Bahamas (UTC-5)</option>
                        <option value="ğŸ‡§ğŸ‡­ Bahrain|Asia/Bahrain">ğŸ‡§ğŸ‡­ Bahrain (UTC+3)</option>
                        <option value="ğŸ‡§ğŸ‡© Bangladesh|Asia/Dhaka">ğŸ‡§ğŸ‡© Bangladesh (UTC+6)</option>
                        <option value="ğŸ‡§ğŸ‡§ Barbados|America/Barbados">ğŸ‡§ğŸ‡§ Barbados (UTC-4)</option>
                        <option value="ğŸ‡§ğŸ‡¾ Belarus|Europe/Minsk">ğŸ‡§ğŸ‡¾ Belarus (UTC+3)</option>
                        <option value="ğŸ‡§ğŸ‡ª Belgium|Europe/Brussels">ğŸ‡§ğŸ‡ª Belgium (UTC+1)</option>
                        <option value="ğŸ‡§ğŸ‡¿ Belize|America/Belize">ğŸ‡§ğŸ‡¿ Belize (UTC-6)</option>
                        <option value="ğŸ‡§ğŸ‡¯ Benin|Africa/Porto-Novo">ğŸ‡§ğŸ‡¯ Benin (UTC+1)</option>
                        <option value="ğŸ‡§ğŸ‡² Bermuda|Atlantic/Bermuda">ğŸ‡§ğŸ‡² Bermuda (UTC-4)</option>
                        <option value="ğŸ‡§ğŸ‡¹ Bhutan|Asia/Thimphu">ğŸ‡§ğŸ‡¹ Bhutan (UTC+6)</option>
                        <option value="ğŸ‡§ğŸ‡´ Bolivia|America/La_Paz">ğŸ‡§ğŸ‡´ Bolivia (UTC-4)</option>
                        <option value="ğŸ‡§ğŸ‡¦ Bosnia & Herzegovina|Europe/Sarajevo">ğŸ‡§ğŸ‡¦ Bosnia & Herzegovina (UTC+1)</option>
                        <option value="ğŸ‡§ğŸ‡¼ Botswana|Africa/Gaborone">ğŸ‡§ğŸ‡¼ Botswana (UTC+2)</option>
                        <option value="ğŸ‡§ğŸ‡· Brazil|America/Sao_Paulo">ğŸ‡§ğŸ‡· Brazil (UTC-3)</option>
                        <option value="ğŸ‡®ğŸ‡´ British Indian Ocean Territory|Indian/Chagos">ğŸ‡®ğŸ‡´ British Indian Ocean Territory (UTC+6)</option>
                        <option value="ğŸ‡»ğŸ‡¬ British Virgin Islands|America/Tortola">ğŸ‡»ğŸ‡¬ British Virgin Islands (UTC-4)</option>
                        <option value="ğŸ‡§ğŸ‡³ Brunei|Asia/Brunei">ğŸ‡§ğŸ‡³ Brunei (UTC+8)</option>
                        <option value="ğŸ‡§ğŸ‡¬ Bulgaria|Europe/Sofia">ğŸ‡§ğŸ‡¬ Bulgaria (UTC+2)</option>
                        <option value="ğŸ‡§ğŸ‡« Burkina Faso|Africa/Ouagadougou">ğŸ‡§ğŸ‡« Burkina Faso (UTC+0)</option>
                        <option value="ğŸ‡§ğŸ‡® Burundi|Africa/Bujumbura">ğŸ‡§ğŸ‡® Burundi (UTC+2)</option>
                        <option value="ğŸ‡°ğŸ‡­ Cambodia|Asia/Phnom_Penh">ğŸ‡°ğŸ‡­ Cambodia (UTC+7)</option>
                        <option value="ğŸ‡¨ğŸ‡² Cameroon|Africa/Douala">ğŸ‡¨ğŸ‡² Cameroon (UTC+1)</option>
                        <option value="ğŸ‡¨ğŸ‡¦ Canada|America/Toronto">ğŸ‡¨ğŸ‡¦ Canada (UTC-5)</option>
                        <option value="ğŸ‡¨ğŸ‡» Cape Verde|Atlantic/Cape_Verde">ğŸ‡¨ğŸ‡» Cape Verde (UTC-1)</option>
                        <option value="ğŸ‡§ğŸ‡¶ Caribbean Netherlands|America/Kralendijk">ğŸ‡§ğŸ‡¶ Caribbean Netherlands (UTC-4)</option>
                        <option value="ğŸ‡°ğŸ‡¾ Cayman Islands|America/Cayman">ğŸ‡°ğŸ‡¾ Cayman Islands (UTC-5)</option>
                        <option value="ğŸ‡¨ğŸ‡« Central African Republic|Africa/Bangui">ğŸ‡¨ğŸ‡« Central African Republic (UTC+1)</option>
                        <option value="ğŸ‡¹ğŸ‡© Chad|Africa/Ndjamena">ğŸ‡¹ğŸ‡© Chad (UTC+1)</option>
                        <option value="ğŸ‡¨ğŸ‡± Chile|America/Santiago">ğŸ‡¨ğŸ‡± Chile (UTC-4)</option>
                        <option value="ğŸ‡¨ğŸ‡³ China|Asia/Shanghai">ğŸ‡¨ğŸ‡³ China (UTC+8)</option>
                        <option value="ğŸ‡¨ğŸ‡½ Christmas Island|Indian/Christmas">ğŸ‡¨ğŸ‡½ Christmas Island (UTC+7)</option>
                        <option value="ğŸ‡¨ğŸ‡¨ Cocos (Keeling) Islands|Indian/Cocos">ğŸ‡¨ğŸ‡¨ Cocos (Keeling) Islands (UTC+6:30)</option>
                        <option value="ğŸ‡¨ğŸ‡´ Colombia|America/Bogota">ğŸ‡¨ğŸ‡´ Colombia (UTC-5)</option>
                        <option value="ğŸ‡°ğŸ‡² Comoros|Indian/Comoro">ğŸ‡°ğŸ‡² Comoros (UTC+3)</option>
                        <option value="ğŸ‡¨ğŸ‡¬ Congo - Brazzaville|Africa/Brazzaville">ğŸ‡¨ğŸ‡¬ Congo - Brazzaville (UTC+1)</option>
                        <option value="ğŸ‡¨ğŸ‡© Congo - Kinshasa|Africa/Kinshasa">ğŸ‡¨ğŸ‡© Congo - Kinshasa (UTC+1)</option>
                        <option value="ğŸ‡¨ğŸ‡° Cook Islands|Pacific/Rarotonga">ğŸ‡¨ğŸ‡° Cook Islands (UTC-10)</option>
                        <option value="ğŸ‡¨ğŸ‡· Costa Rica|America/Costa_Rica">ğŸ‡¨ğŸ‡· Costa Rica (UTC-6)</option>
                        <option value="ğŸ‡­ğŸ‡· Croatia|Europe/Zagreb">ğŸ‡­ğŸ‡· Croatia (UTC+1)</option>
                        <option value="ğŸ‡¨ğŸ‡º Cuba|America/Havana">ğŸ‡¨ğŸ‡º Cuba (UTC-5)</option>
                        <option value="ğŸ‡¨ğŸ‡¼ CuraÃ§ao|America/Curacao">ğŸ‡¨ğŸ‡¼ CuraÃ§ao (UTC-4)</option>
                        <option value="ğŸ‡¨ğŸ‡¾ Cyprus|Asia/Nicosia">ğŸ‡¨ğŸ‡¾ Cyprus (UTC+2)</option>
                        <option value="ğŸ‡¨ğŸ‡¿ Czechia|Europe/Prague">ğŸ‡¨ğŸ‡¿ Czechia (UTC+1)</option>
                        <option value="ğŸ‡©ğŸ‡° Denmark|Europe/Copenhagen">ğŸ‡©ğŸ‡° Denmark (UTC+1)</option>
                        <option value="ğŸ‡©ğŸ‡¯ Djibouti|Africa/Djibouti">ğŸ‡©ğŸ‡¯ Djibouti (UTC+3)</option>
                        <option value="ğŸ‡©ğŸ‡² Dominica|America/Dominica">ğŸ‡©ğŸ‡² Dominica (UTC-4)</option>
                        <option value="ğŸ‡©ğŸ‡´ Dominican Republic|America/Santo_Domingo">ğŸ‡©ğŸ‡´ Dominican Republic (UTC-4)</option>
                        <option value="ğŸ‡ªğŸ‡¨ Ecuador|America/Guayaquil">ğŸ‡ªğŸ‡¨ Ecuador (UTC-5)</option>
                        <option value="ğŸ‡ªğŸ‡¬ Egypt|Africa/Cairo">ğŸ‡ªğŸ‡¬ Egypt (UTC+2)</option>
                        <option value="ğŸ‡¸ğŸ‡» El Salvador|America/El_Salvador">ğŸ‡¸ğŸ‡» El Salvador (UTC-6)</option>
                        <option value="ğŸ‡¬ğŸ‡¶ Equatorial Guinea|Africa/Malabo">ğŸ‡¬ğŸ‡¶ Equatorial Guinea (UTC+1)</option>
                        <option value="ğŸ‡ªğŸ‡· Eritrea|Africa/Asmara">ğŸ‡ªğŸ‡· Eritrea (UTC+3)</option>
                        <option value="ğŸ‡ªğŸ‡ª Estonia|Europe/Tallinn">ğŸ‡ªğŸ‡ª Estonia (UTC+2)</option>
                        <option value="ğŸ‡¸ğŸ‡¿ Eswatini|Africa/Mbabane">ğŸ‡¸ğŸ‡¿ Eswatini (UTC+2)</option>
                        <option value="ğŸ‡ªğŸ‡¹ Ethiopia|Africa/Addis_Ababa">ğŸ‡ªğŸ‡¹ Ethiopia (UTC+3)</option>
                        <option value="ğŸ‡«ğŸ‡° Falkland Islands|Atlantic/Stanley">ğŸ‡«ğŸ‡° Falkland Islands (UTC-3)</option>
                        <option value="ğŸ‡«ğŸ‡´ Faroe Islands|Atlantic/Faroe">ğŸ‡«ğŸ‡´ Faroe Islands (UTC+0)</option>
                        <option value="ğŸ‡«ğŸ‡¯ Fiji|Pacific/Fiji">ğŸ‡«ğŸ‡¯ Fiji (UTC+12)</option>
                        <option value="ğŸ‡«ğŸ‡® Finland|Europe/Helsinki">ğŸ‡«ğŸ‡® Finland (UTC+2)</option>
                        <option value="ğŸ‡«ğŸ‡· France|Europe/Paris">ğŸ‡«ğŸ‡· France (UTC+1)</option>
                        <option value="ğŸ‡¬ğŸ‡« French Guiana|America/Cayenne">ğŸ‡¬ğŸ‡« French Guiana (UTC-3)</option>
                        <option value="ğŸ‡µğŸ‡« French Polynesia|Pacific/Tahiti">ğŸ‡µğŸ‡« French Polynesia (UTC-10)</option>
                        <option value="ğŸ‡¹ğŸ‡« French Southern Territories|Indian/Kerguelen">ğŸ‡¹ğŸ‡« French Southern Territories (UTC+5)</option>
                        <option value="ğŸ‡¬ğŸ‡¦ Gabon|Africa/Libreville">ğŸ‡¬ğŸ‡¦ Gabon (UTC+1)</option>
                        <option value="ğŸ‡¬ğŸ‡² Gambia|Africa/Banjul">ğŸ‡¬ğŸ‡² Gambia (UTC+0)</option>
                        <option value="ğŸ‡¬ğŸ‡ª Georgia|Asia/Tbilisi">ğŸ‡¬ğŸ‡ª Georgia (UTC+4)</option>
                        <option value="ğŸ‡©ğŸ‡ª Germany|Europe/Berlin">ğŸ‡©ğŸ‡ª Germany (UTC+1)</option>
                        <option value="ğŸ‡¬ğŸ‡­ Ghana|Africa/Accra">ğŸ‡¬ğŸ‡­ Ghana (UTC+0)</option>
                        <option value="ğŸ‡¬ğŸ‡® Gibraltar|Europe/Gibraltar">ğŸ‡¬ğŸ‡® Gibraltar (UTC+1)</option>
                        <option value="ğŸ‡¬ğŸ‡· Greece|Europe/Athens">ğŸ‡¬ğŸ‡· Greece (UTC+2)</option>
                        <option value="ğŸ‡¬ğŸ‡± Greenland|America/Godthab">ğŸ‡¬ğŸ‡± Greenland (UTC-3)</option>
                        <option value="ğŸ‡¬ğŸ‡© Grenada|America/Grenada">ğŸ‡¬ğŸ‡© Grenada (UTC-4)</option>
                        <option value="ğŸ‡¬ğŸ‡µ Guadeloupe|America/Guadeloupe">ğŸ‡¬ğŸ‡µ Guadeloupe (UTC-4)</option>
                        <option value="ğŸ‡¬ğŸ‡º Guam|Pacific/Guam">ğŸ‡¬ğŸ‡º Guam (UTC+10)</option>
                        <option value="ğŸ‡¬ğŸ‡¹ Guatemala|America/Guatemala">ğŸ‡¬ğŸ‡¹ Guatemala (UTC-6)</option>
                        <option value="ğŸ‡¬ğŸ‡¬ Guernsey|Europe/Guernsey">ğŸ‡¬ğŸ‡¬ Guernsey (UTC+0)</option>
                        <option value="ğŸ‡¬ğŸ‡³ Guinea|Africa/Conakry">ğŸ‡¬ğŸ‡³ Guinea (UTC+0)</option>
                        <option value="ğŸ‡¬ğŸ‡¼ Guinea-Bissau|Africa/Bissau">ğŸ‡¬ğŸ‡¼ Guinea-Bissau (UTC+0)</option>
                        <option value="ğŸ‡¬ğŸ‡¾ Guyana|America/Guyana">ğŸ‡¬ğŸ‡¾ Guyana (UTC-4)</option>
                        <option value="ğŸ‡­ğŸ‡¹ Haiti|America/Port-au-Prince">ğŸ‡­ğŸ‡¹ Haiti (UTC-5)</option>
                        <option value="ğŸ‡­ğŸ‡³ Honduras|America/Tegucigalpa">ğŸ‡­ğŸ‡³ Honduras (UTC-6)</option>
                        <option value="ğŸ‡­ğŸ‡° Hong Kong|Asia/Hong_Kong">ğŸ‡­ğŸ‡° Hong Kong (UTC+8)</option>
                        <option value="ğŸ‡­ğŸ‡º Hungary|Europe/Budapest">ğŸ‡­ğŸ‡º Hungary (UTC+1)</option>
                        <option value="ğŸ‡®ğŸ‡¸ Iceland|Atlantic/Reykjavik">ğŸ‡®ğŸ‡¸ Iceland (UTC+0)</option>
                        <option value="ğŸ‡®ğŸ‡³ India|Asia/Kolkata">ğŸ‡®ğŸ‡³ India (UTC+5:30)</option>
                        <option value="ğŸ‡®ğŸ‡© Indonesia|Asia/Jakarta">ğŸ‡®ğŸ‡© Indonesia (UTC+7)</option>
                        <option value="ğŸ‡®ğŸ‡· Iran|Asia/Tehran">ğŸ‡®ğŸ‡· Iran (UTC+3:30)</option>
                        <option value="ğŸ‡®ğŸ‡¶ Iraq|Asia/Baghdad">ğŸ‡®ğŸ‡¶ Iraq (UTC+3)</option>
                        <option value="ğŸ‡®ğŸ‡ª Ireland|Europe/Dublin">ğŸ‡®ğŸ‡ª Ireland (UTC+0)</option>
                        <option value="ğŸ‡®ğŸ‡² Isle of Man|Europe/Isle_of_Man">ğŸ‡®ğŸ‡² Isle of Man (UTC+0)</option>
                        <option value="ğŸ‡®ğŸ‡± Israel|Asia/Jerusalem">ğŸ‡®ğŸ‡± Israel (UTC+2)</option>
                        <option value="ğŸ‡®ğŸ‡¹ Italy|Europe/Rome">ğŸ‡®ğŸ‡¹ Italy (UTC+1)</option>
                        <option value="ğŸ‡¨ğŸ‡® Ivory Coast|Africa/Abidjan">ğŸ‡¨ï¿½ï¿½ Ivory Coast (UTC+0)</option>
                        <option value="ğŸ‡¯ğŸ‡² Jamaica|America/Jamaica">ğŸ‡¯ğŸ‡² Jamaica (UTC-5)</option>
                        <option value="ğŸ‡¯ğŸ‡µ Japan|Asia/Tokyo">ğŸ‡¯ğŸ‡µ Japan (UTC+9)</option>
                        <option value="ğŸ‡¯ğŸ‡ª Jersey|Europe/Jersey">ğŸ‡¯ğŸ‡ª Jersey (UTC+0)</option>
                        <option value="ğŸ‡¯ğŸ‡´ Jordan|Asia/Amman">ğŸ‡¯ğŸ‡´ Jordan (UTC+2)</option>
                        <option value="ğŸ‡°ğŸ‡¿ Kazakhstan|Asia/Almaty">ğŸ‡°ğŸ‡¿ Kazakhstan (UTC+6)</option>
                        <option value="ğŸ‡°ğŸ‡ª Kenya|Africa/Nairobi">ğŸ‡°ğŸ‡ª Kenya (UTC+3)</option>
                        <option value="ğŸ‡°ğŸ‡® Kiribati|Pacific/Tarawa">ğŸ‡°ğŸ‡® Kiribati (UTC+12)</option>
                        <option value="ğŸ‡½ğŸ‡° Kosovo|Europe/Belgrade">ğŸ‡½ğŸ‡° Kosovo (UTC+1)</option>
                        <option value="ğŸ‡°ğŸ‡¼ Kuwait|Asia/Kuwait">ğŸ‡°ğŸ‡¼ Kuwait (UTC+3)</option>
                        <option value="ğŸ‡°ğŸ‡¬ Kyrgyzstan|Asia/Bishkek">ğŸ‡°ğŸ‡¬ Kyrgyzstan (UTC+6)</option>
                        <option value="ğŸ‡±ğŸ‡¦ Laos|Asia/Vientiane">ğŸ‡±ğŸ‡¦ Laos (UTC+7)</option>
                        <option value="ğŸ‡±ğŸ‡» Latvia|Europe/Riga">ğŸ‡±ğŸ‡» Latvia (UTC+2)</option>
                        <option value="ğŸ‡±ğŸ‡§ Lebanon|Asia/Beirut">ğŸ‡±ğŸ‡§ Lebanon (UTC+2)</option>
                        <option value="ğŸ‡±ğŸ‡¸ Lesotho|Africa/Maseru">ğŸ‡±ğŸ‡¸ Lesotho (UTC+2)</option>
                        <option value="ğŸ‡±ğŸ‡· Liberia|Africa/Monrovia">ğŸ‡±ğŸ‡· Liberia (UTC+0)</option>
                        <option value="ğŸ‡±ğŸ‡¾ Libya|Africa/Tripoli">ğŸ‡±ğŸ‡¾ Libya (UTC+2)</option>
                        <option value="ğŸ‡±ğŸ‡® Liechtenstein|Europe/Vaduz">ğŸ‡±ğŸ‡® Liechtenstein (UTC+1)</option>
                        <option value="ğŸ‡±ğŸ‡¹ Lithuania|Europe/Vilnius">ğŸ‡±ğŸ‡¹ Lithuania (UTC+2)</option>
                        <option value="ğŸ‡±ğŸ‡º Luxembourg|Europe/Luxembourg">ğŸ‡±ğŸ‡º Luxembourg (UTC+1)</option>
                        <option value="ğŸ‡²ğŸ‡´ Macao|Asia/Macau">ğŸ‡²ğŸ‡´ Macao (UTC+8)</option>
                        <option value="ğŸ‡²ğŸ‡° North Macedonia|Europe/Skopje">ğŸ‡²ğŸ‡° North Macedonia (UTC+1)</option>
                        <option value="ğŸ‡²ğŸ‡¬ Madagascar|Indian/Antananarivo">ğŸ‡²ğŸ‡¬ Madagascar (UTC+3)</option>
                        <option value="ğŸ‡²ğŸ‡¼ Malawi|Africa/Blantyre">ğŸ‡²ğŸ‡¼ Malawi (UTC+2)</option>
                        <option value="ğŸ‡²ğŸ‡¾ Malaysia|Asia/Kuala_Lumpur">ğŸ‡²ğŸ‡¾ Malaysia (UTC+8)</option>
                        <option value="ğŸ‡²ğŸ‡» Maldives|Indian/Maldives">ğŸ‡²ğŸ‡» Maldives (UTC+5)</option>
                        <option value="ğŸ‡²ğŸ‡± Mali|Africa/Bamako">ğŸ‡²ğŸ‡± Mali (UTC+0)</option>
                        <option value="ğŸ‡²ğŸ‡¹ Malta|Europe/Malta">ğŸ‡²ğŸ‡¹ Malta (UTC+1)</option>
                        <option value="ğŸ‡²ğŸ‡­ Marshall Islands|Pacific/Majuro">ğŸ‡²ğŸ‡­ Marshall Islands (UTC+12)</option>
                        <option value="ğŸ‡²ğŸ‡¶ Martinique|America/Martinique">ğŸ‡²ğŸ‡¶ Martinique (UTC-4)</option>
                        <option value="ğŸ‡²ğŸ‡· Mauritania|Africa/Nouakchott">ğŸ‡²ğŸ‡· Mauritania (UTC+0)</option>
                        <option value="ğŸ‡²ğŸ‡º Mauritius|Indian/Mauritius">ğŸ‡²ğŸ‡º Mauritius (UTC+4)</option>
                        <option value="ğŸ‡¾ğŸ‡¹ Mayotte|Indian/Mayotte">ğŸ‡¾ğŸ‡¹ Mayotte (UTC+3)</option>
                        <option value="ğŸ‡²ğŸ‡½ Mexico|America/Mexico_City">ğŸ‡²ğŸ‡½ Mexico (UTC-6)</option>
                        <option value="ğŸ‡«ğŸ‡² Micronesia|Pacific/Chuuk">ğŸ‡«ğŸ‡² Micronesia (UTC+10)</option>
                        <option value="ğŸ‡²ğŸ‡© Moldova|Europe/Chisinau">ğŸ‡²ğŸ‡© Moldova (UTC+2)</option>
                        <option value="ğŸ‡²ğŸ‡¨ Monaco|Europe/Monaco">ğŸ‡²ğŸ‡¨ Monaco (UTC+1)</option>
                        <option value="ğŸ‡²ğŸ‡³ Mongolia|Asia/Ulaanbaatar">ğŸ‡²ğŸ‡³ Mongolia (UTC+8)</option>
                        <option value="ğŸ‡²ğŸ‡ª Montenegro|Europe/Podgorica">ğŸ‡²ğŸ‡ª Montenegro (UTC+1)</option>
                        <option value="ğŸ‡²ğŸ‡¸ Montserrat|America/Montserrat">ğŸ‡²ğŸ‡¸ Montserrat (UTC-4)</option>
                        <option value="ğŸ‡²ğŸ‡¦ Morocco|Africa/Casablanca">ğŸ‡²ğŸ‡¦ Morocco (UTC+1)</option>
                        <option value="ğŸ‡²ğŸ‡¿ Mozambique|Africa/Maputo">ğŸ‡²ğŸ‡¿ Mozambique (UTC+2)</option>
                        <option value="ğŸ‡²ğŸ‡² Myanmar (Burma)|Asia/Yangon">ğŸ‡²ğŸ‡² Myanmar (Burma) (UTC+6:30)</option>
                        <option value="ğŸ‡³ğŸ‡¦ Namibia|Africa/Windhoek">ğŸ‡³ğŸ‡¦ Namibia (UTC+2)</option>
                        <option value="ğŸ‡³ğŸ‡· Nauru|Pacific/Nauru">ğŸ‡³ğŸ‡· Nauru (UTC+12)</option>
                        <option value="ğŸ‡³ğŸ‡µ Nepal|Asia/Kathmandu">ğŸ‡³ğŸ‡µ Nepal (UTC+5:45)</option>
                        <option value="ğŸ‡³ğŸ‡± Netherlands|Europe/Amsterdam">ğŸ‡³ğŸ‡± Netherlands (UTC+1)</option>
                        <option value="ğŸ‡³ğŸ‡¨ New Caledonia|Pacific/Noumea">ğŸ‡³ğŸ‡¨ New Caledonia (UTC+11)</option>
                        <option value="ğŸ‡³ğŸ‡¿ New Zealand|Pacific/Auckland">ğŸ‡³ğŸ‡¿ New Zealand (UTC+12)</option>
                        <option value="ğŸ‡³ğŸ‡® Nicaragua|America/Managua">ğŸ‡³ğŸ‡® Nicaragua (UTC-6)</option>
                        <option value="ğŸ‡³ğŸ‡ª Niger|Africa/Niamey">ğŸ‡³ğŸ‡ª Niger (UTC+1)</option>
                        <option value="ğŸ‡³ğŸ‡¬ Nigeria|Africa/Lagos">ğŸ‡³ğŸ‡¬ Nigeria (UTC+1)</option>
                        <option value="ğŸ‡³ğŸ‡º Niue|Pacific/Niue">ğŸ‡³ğŸ‡º Niue (UTC-11)</option>
                        <option value="ğŸ‡³ğŸ‡« Norfolk Island|Pacific/Norfolk">ğŸ‡³ğŸ‡« Norfolk Island (UTC+11)</option>
                        <option value="ğŸ‡°ğŸ‡µ North Korea|Asia/Pyongyang">ğŸ‡°ğŸ‡µ North Korea (UTC+9)</option>
                        <option value="ğŸ‡²ğŸ‡° North Macedonia|Europe/Skopje">ğŸ‡²ğŸ‡° North Macedonia (UTC+1)</option>
                        <option value="ğŸ‡²ğŸ‡µ Northern Mariana Islands|Pacific/Saipan">ğŸ‡²ğŸ‡µ Northern Mariana Islands (UTC+10)</option>
                        <option value="ğŸ‡³ğŸ‡´ Norway|Europe/Oslo">ğŸ‡³ğŸ‡´ Norway (UTC+1)</option>
                        <option value="ğŸ‡´ğŸ‡² Oman|Asia/Muscat">ğŸ‡´ğŸ‡² Oman (UTC+4)</option>
                        <option value="ğŸ‡µğŸ‡° Pakistan|Asia/Karachi">ğŸ‡µğŸ‡° Pakistan (UTC+5)</option>
                        <option value="ğŸ‡µğŸ‡¼ Palau|Pacific/Palau">ğŸ‡µğŸ‡¼ Palau (UTC+9)</option>
                        <option value="ğŸ‡µğŸ‡¸ Palestine|Asia/Gaza">ğŸ‡µğŸ‡¸ Palestine (UTC+2)</option>
                        <option value="ğŸ‡µğŸ‡¦ Panama|America/Panama">ğŸ‡µğŸ‡¦ Panama (UTC-5)</option>
                        <option value="ğŸ‡µğŸ‡¬ Papua New Guinea|Pacific/Port_Moresby">ğŸ‡µğŸ‡¬ Papua New Guinea (UTC+10)</option>
                        <option value="ğŸ‡µğŸ‡¾ Paraguay|America/Asuncion">ğŸ‡µğŸ‡¾ Paraguay (UTC-4)</option>
                        <option value="ğŸ‡µğŸ‡ª Peru|America/Lima">ğŸ‡µğŸ‡ª Peru (UTC-5)</option>
                        <option value="ğŸ‡µğŸ‡­ Philippines|Asia/Manila">ğŸ‡µğŸ‡­ Philippines (UTC+8)</option>
                        <option value="ğŸ‡µğŸ‡³ Pitcairn Islands|Pacific/Pitcairn">ğŸ‡µğŸ‡³ Pitcairn Islands (UTC-8)</option>
                        <option value="ğŸ‡µğŸ‡± Poland|Europe/Warsaw">ğŸ‡µğŸ‡± Poland (UTC+1)</option>
                        <option value="ğŸ‡µğŸ‡¹ Portugal|Europe/Lisbon">ğŸ‡µğŸ‡¹ Portugal (UTC+0)</option>
                        <option value="ğŸ‡µğŸ‡· Puerto Rico|America/Puerto_Rico">ğŸ‡µğŸ‡· Puerto Rico (UTC-4)</option>
                        <option value="ğŸ‡¶ğŸ‡¦ Qatar|Asia/Qatar">ğŸ‡¶ğŸ‡¦ Qatar (UTC+3)</option>
                        <option value="ğŸ‡·ğŸ‡´ Romania|Europe/Bucharest">ğŸ‡·ğŸ‡´ Romania (UTC+2)</option>
                        <option value="ğŸ‡·ğŸ‡º Russia|Europe/Moscow">ğŸ‡·ğŸ‡º Russia (UTC+3)</option>
                        <option value="ğŸ‡·ğŸ‡¼ Rwanda|Africa/Kigali">ğŸ‡·ğŸ‡¼ Rwanda (UTC+2)</option>
                        <option value="ğŸ‡¼ğŸ‡¸ Samoa|Pacific/Apia">ğŸ‡¼ğŸ‡¸ Samoa (UTC+13)</option>
                        <option value="ğŸ‡¸ğŸ‡² San Marino|Europe/San_Marino">ğŸ‡¸ğŸ‡² San Marino (UTC+1)</option>
                        <option value="ğŸ‡¸ğŸ‡¹ SÃ£o TomÃ© & PrÃ­ncipe|Africa/Sao_Tome">ğŸ‡¸ğŸ‡¹ SÃ£o TomÃ© & PrÃ­ncipe (UTC+0)</option>
                        <option value="ğŸ‡¸ğŸ‡¦ Saudi Arabia|Asia/Riyadh">ğŸ‡¸ğŸ‡¦ Saudi Arabia (UTC+3)</option>
                        <option value="ğŸ‡¸ğŸ‡³ Senegal|Africa/Dakar">ğŸ‡¸ğŸ‡³ Senegal (UTC+0)</option>
                        <option value="ğŸ‡·ğŸ‡¸ Serbia|Europe/Belgrade">ğŸ‡·ğŸ‡¸ Serbia (UTC+1)</option>
                        <option value="ğŸ‡¸ğŸ‡¨ Seychelles|Indian/Mahe">ğŸ‡¸ğŸ‡¨ Seychelles (UTC+4)</option>
                        <option value="ğŸ‡¸ğŸ‡± Sierra Leone|Africa/Freetown">ğŸ‡¸ğŸ‡± Sierra Leone (UTC+0)</option>
                        <option value="ğŸ‡¸ğŸ‡¬ Singapore|Asia/Singapore">ğŸ‡¸ğŸ‡¬ Singapore (UTC+8)</option>
                        <option value="ğŸ‡¸ğŸ‡½ Sint Maarten|America/Lower_Princes">ğŸ‡¸ğŸ‡½ Sint Maarten (UTC-4)</option>
                        <option value="ğŸ‡¸ğŸ‡° Slovakia|Europe/Bratislava">ğŸ‡¸ğŸ‡° Slovakia (UTC+1)</option>
                        <option value="ğŸ‡¸ğŸ‡® Slovenia|Europe/Ljubljana">ğŸ‡¸ğŸ‡® Slovenia (UTC+1)</option>
                        <option value="ğŸ‡¸ğŸ‡§ Solomon Islands|Pacific/Guadalcanal">ğŸ‡¸ğŸ‡§ Solomon Islands (UTC+11)</option>
                        <option value="ğŸ‡¸ğŸ‡´ Somalia|Africa/Mogadishu">ğŸ‡¸ğŸ‡´ Somalia (UTC+3)</option>
                        <option value="ğŸ‡¿ğŸ‡¦ South Africa|Africa/Johannesburg">ğŸ‡¿ğŸ‡¦ South Africa (UTC+2)</option>
                        <option value="ğŸ‡°ğŸ‡· South Korea|Asia/Seoul">ğŸ‡°ğŸ‡· South Korea (UTC+9)</option>
                        <option value="ğŸ‡¸ğŸ‡¸ South Sudan|Africa/Juba">ğŸ‡¸ğŸ‡¸ South Sudan (UTC+3)</option>
                        <option value="ğŸ‡ªğŸ‡¸ Spain|Europe/Madrid">ğŸ‡ªğŸ‡¸ Spain (UTC+1)</option>
                        <option value="ğŸ‡±ğŸ‡° Sri Lanka|Asia/Colombo">ğŸ‡±ğŸ‡° Sri Lanka (UTC+5:30)</option>
                        <option value="ğŸ‡§ğŸ‡± St. BarthÃ©lemy|America/St_Barthelemy">ğŸ‡§ğŸ‡± St. BarthÃ©lemy (UTC-4)</option>
                        <option value="ğŸ‡¸ğŸ‡­ St. Helena|Atlantic/St_Helena">ğŸ‡¸ğŸ‡­ St. Helena (UTC+0)</option>
                        <option value="ğŸ‡°ğŸ‡³ St. Kitts & Nevis|America/St_Kitts">ğŸ‡°ğŸ‡³ St. Kitts & Nevis (UTC-4)</option>
                        <option value="ğŸ‡±ğŸ‡¨ St. Lucia|America/St_Lucia">ğŸ‡±ğŸ‡¨ St. Lucia (UTC-4)</option>
                        <option value="ğŸ‡²ğŸ‡« St. Martin|America/Marigot">ğŸ‡²ğŸ‡« St. Martin (UTC-4)</option>
                        <option value="ğŸ‡µğŸ‡² St. Pierre & Miquelon|America/Miquelon">ğŸ‡µğŸ‡² St. Pierre & Miquelon (UTC-3)</option>
                        <option value="ğŸ‡»ğŸ‡¨ St. Vincent & Grenadines|America/St_Vincent">ğŸ‡»ğŸ‡¨ St. Vincent & Grenadines (UTC-4)</option>
                        <option value="ğŸ‡¸ğŸ‡© Sudan|Africa/Khartoum">ğŸ‡¸ğŸ‡© Sudan (UTC+2)</option>
                        <option value="ğŸ‡¸ğŸ‡· Suriname|America/Paramaribo">ğŸ‡¸ğŸ‡· Suriname (UTC-3)</option>
                        <option value="ğŸ‡¸ğŸ‡¯ Svalbard & Jan Mayen|Arctic/Longyearbyen">ğŸ‡¸ğŸ‡¯ Svalbard & Jan Mayen (UTC+1)</option>
                        <option value="ğŸ‡¸ğŸ‡ª Sweden|Europe/Stockholm">ğŸ‡¸ğŸ‡ª Sweden (UTC+1)</option>
                        <option value="ğŸ‡¨ğŸ‡­ Switzerland|Europe/Zurich">ğŸ‡¨ğŸ‡­ Switzerland (UTC+1)</option>
                        <option value="ğŸ‡¸ğŸ‡¾ Syria|Asia/Damascus">ğŸ‡¸ğŸ‡¾ Syria (UTC+2)</option>
                        <option value="ğŸ‡¹ğŸ‡¼ Taiwan|Asia/Taipei">ğŸ‡¹ğŸ‡¼ Taiwan (UTC+8)</option>
                        <option value="ğŸ‡¹ğŸ‡¯ Tajikistan|Asia/Dushanbe">ğŸ‡¹ğŸ‡¯ Tajikistan (UTC+5)</option>
                        <option value="ğŸ‡¹ğŸ‡¿ Tanzania|Africa/Dar_es_Salaam">ğŸ‡¹ğŸ‡¿ Tanzania (UTC+3)</option>
                        <option value="ğŸ‡¹ğŸ‡­ Thailand|Asia/Bangkok">ğŸ‡¹ğŸ‡­ Thailand (UTC+7)</option>
                        <option value="ğŸ‡¹ğŸ‡± Timor-Leste|Asia/Dili">ğŸ‡¹ğŸ‡± Timor-Leste (UTC+9)</option>
                        <option value="ğŸ‡¹ğŸ‡¬ Togo|Africa/Lome">ğŸ‡¹ğŸ‡¬ Togo (UTC+0)</option>
                        <option value="ğŸ‡¹ğŸ‡° Tokelau|Pacific/Fakaofo">ğŸ‡¹ğŸ‡° Tokelau (UTC+13)</option>
                        <option value="ğŸ‡¹ğŸ‡´ Tonga|Pacific/Tongatapu">ğŸ‡¹ğŸ‡´ Tonga (UTC+13)</option>
                        <option value="ğŸ‡¹ğŸ‡¹ Trinidad & Tobago|America/Port_of_Spain">ğŸ‡¹ğŸ‡¹ Trinidad & Tobago (UTC-4)</option>
                        <option value="ğŸ‡¹ğŸ‡³ Tunisia|Africa/Tunis">ğŸ‡¹ğŸ‡³ Tunisia (UTC+1)</option>
                        <option value="ğŸ‡¹ğŸ‡· Turkey|Europe/Istanbul">ğŸ‡¹ğŸ‡· Turkey (UTC+3)</option>
                        <option value="ğŸ‡¹ğŸ‡² Turkmenistan|Asia/Ashgabat">ğŸ‡¹ğŸ‡² Turkmenistan (UTC+5)</option>
                        <option value="ğŸ‡¹ğŸ‡¨ Turks & Caicos Islands|America/Grand_Turk">ğŸ‡¹ğŸ‡¨ Turks & Caicos Islands (UTC-5)</option>
                        <option value="ğŸ‡¹ğŸ‡» Tuvalu|Pacific/Funafuti">ğŸ‡¹ğŸ‡» Tuvalu (UTC+12)</option>
                        <option value="ğŸ‡ºğŸ‡¬ Uganda|Africa/Kampala">ğŸ‡ºğŸ‡¬ Uganda (UTC+3)</option>
                        <option value="ğŸ‡ºğŸ‡¦ Ukraine|Europe/Kiev">ğŸ‡ºğŸ‡¦ Ukraine (UTC+2)</option>
                        <option value="ğŸ‡¦ğŸ‡ª United Arab Emirates|Asia/Dubai">ğŸ‡¦ğŸ‡ª United Arab Emirates (UTC+4)</option>
                        <option value="ğŸ‡¬ğŸ‡§ United Kingdom|Europe/London">ğŸ‡¬ğŸ‡§ United Kingdom (UTC+0)</option>
                        <option value="ğŸ‡ºğŸ‡¸ United States|America/New_York">ğŸ‡ºğŸ‡¸ United States (UTC-5)</option>
                        <option value="ğŸ‡ºğŸ‡¾ Uruguay|America/Montevideo">ğŸ‡ºğŸ‡¾ Uruguay (UTC-3)</option>
                        <option value="ğŸ‡ºğŸ‡¿ Uzbekistan|Asia/Tashkent">ğŸ‡ºğŸ‡¿ Uzbekistan (UTC+5)</option>
                        <option value="ğŸ‡»ğŸ‡º Vanuatu|Pacific/Efate">ğŸ‡»ğŸ‡º Vanuatu (UTC+11)</option>
                        <option value="ğŸ‡»ğŸ‡¦ Vatican City|Europe/Vatican">ğŸ‡»ğŸ‡¦ Vatican City (UTC+1)</option>
                        <option value="ğŸ‡»ğŸ‡ª Venezuela|America/Caracas">ğŸ‡»ğŸ‡ª Venezuela (UTC-4)</option>
                        <option value="ğŸ‡»ğŸ‡³ Vietnam|Asia/Ho_Chi_Minh">ğŸ‡»ğŸ‡³ Vietnam (UTC+7)</option>
                        <option value="ğŸ‡¼ğŸ‡« Wallis & Futuna|Pacific/Wallis">ğŸ‡¼ğŸ‡« Wallis & Futuna (UTC+12)</option>
                        <option value="ğŸ‡ªğŸ‡­ Western Sahara|Africa/El_Aaiun">ğŸ‡ªğŸ‡­ Western Sahara (UTC+0)</option>
                        <option value="ğŸ‡¾ğŸ‡ª Yemen|Asia/Aden">ğŸ‡¾ğŸ‡ª Yemen (UTC+3)</option>
                        <option value="ğŸ‡¿ğŸ‡² Zambia|Africa/Lusaka">ğŸ‡¿ğŸ‡² Zambia (UTC+2)</option>
                        <option value="ğŸ‡¿ğŸ‡¼ Zimbabwe|Africa/Harare">ğŸ‡¿ğŸ‡¼ Zimbabwe (UTC+2)</option>
                        <option value="ğŸŒ Global|Etc/UTC">ğŸŒ Global (UTC)</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="comments">Additional comments (optional):</label>
                    <textarea id="comments" name="comments" rows="4" placeholder="Tell us more about your news preferences, specific sources you like, or any other relevant information..."></textarea>
                </div>
                
                <button type="submit" class="submit-btn" id="submitBtn">Send Preferences</button>
            </form>
            
            <div id="loading" class="loading">
                <div class="spinner"></div>
                <p>Sending your preferences...</p>
            </div>
            
            <div id="successMessage" class="success-message" style="display: none;">
                <h3>Thank you for your preferences!</h3>
                <p>We have received your information and you will soon start receiving personalized news according to your interests. Our n8n system will process your preferences and activate a personalized flow for you.</p>
                <a href="https://t.me/Simply_news_chat" class="cta-button">Join Telegram Group</a>
            </div>
        </div>
    </section>

    <script>
        // Handle "Other" checkbox functionality
        document.getElementById('otherCheckbox').addEventListener('change', function() {
            const searchContainer = document.getElementById('searchContainer');
            if (this.checked) {
                searchContainer.classList.add('active');
            } else {
                searchContainer.classList.remove('active');
                document.getElementById('searchInput').value = '';
                document.getElementById('searchResults').style.display = 'none';
            }
        });

        // Search functionality with n8n integration
        let searchTimeout;
        document.getElementById('searchInput').addEventListener('input', function() {
            const query = this.value.trim();
            const searchResults = document.getElementById('searchResults');
            
            clearTimeout(searchTimeout);
            
            if (query.length < 2) {
                searchResults.style.display = 'none';
                return;
            }
            
            searchTimeout = setTimeout(async () => {
                try {
                    // Replace with your n8n search webhook URL
                    const searchWebhookUrl = 'TU_URL_DEL_WEBHOOK_BUSQUEDA_N8N_AQUI';
                    
                    const response = await fetch(searchWebhookUrl, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            query: query,
                            type: 'topic_search'
                        })
                    });
                    
                    if (response.ok) {
                        const results = await response.json();
                        displaySearchResults(results);
                    } else {
                        // Fallback to local search if n8n is not available
                        const fallbackResults = getFallbackSearchResults(query);
                        displaySearchResults(fallbackResults);
                    }
                } catch (error) {
                    console.error('Search error:', error);
                    // Fallback to local search
                    const fallbackResults = getFallbackSearchResults(query);
                    displaySearchResults(fallbackResults);
                }
            }, 300);
        });

        function displaySearchResults(results) {
            const searchResults = document.getElementById('searchResults');
            searchResults.innerHTML = '';
            
            if (results.length === 0) {
                searchResults.innerHTML = '<div class="search-result-item">No results found</div>';
            } else {
                results.forEach(result => {
                    const item = document.createElement('div');
                    item.className = 'search-result-item';
                    item.textContent = result.name || result;
                    item.addEventListener('click', () => {
                        document.getElementById('searchInput').value = result.name || result;
                        searchResults.style.display = 'none';
                    });
                    searchResults.appendChild(item);
                });
            }
            
            searchResults.style.display = 'block';
        }

        function getFallbackSearchResults(query) {
            const fallbackTopics = [
                'Cryptocurrency', 'Blockchain', 'Climate Change', 'Renewable Energy',
                'Space Exploration', 'Mars Mission', 'Electric Vehicles', 'Quantum Computing',
                'Machine Learning', 'Data Science', 'Cybersecurity', 'Digital Privacy',
                'Social Media', 'Gaming', 'E-sports', 'Virtual Reality', 'Augmented Reality',
                '5G Technology', 'Internet of Things', 'Smart Cities', 'Fintech',
                'Biotechnology', 'Gene Editing', 'Vaccines', 'Mental Health',
                'Sustainable Living', 'Zero Waste', 'Plant-based Diet', 'Fitness',
                'Travel', 'Tourism', 'Aviation', 'Maritime', 'Logistics', 'Supply Chain'
            ];
            
            return fallbackTopics.filter(topic => 
                topic.toLowerCase().includes(query.toLowerCase())
            ).slice(0, 10);
        }

        // Mapeo de idiomas soportados por paÃ­s en NewsAPI
        const countryLanguages = {
            ca: ['en', 'fr'],
            ch: ['de', 'fr', 'it'],
            be: ['nl', 'fr'],
            ae: ['ar', 'en'],
            ma: ['ar', 'fr'],
            eg: ['ar', 'en'],
            il: ['he', 'en'],
            in: ['en', 'hi'],
            sg: ['en', 'zh'],
            my: ['en', 'zh'],
            za: ['en', 'af'],
            // ... agrega mÃ¡s paÃ­ses con varios idiomas ...
        };
        // Lista de idiomas soportados por NewsAPI
        const languageNames = {
            ar: 'Arabic',
            de: 'German',
            en: 'English',
            es: 'Spanish',
            fr: 'French',
            he: 'Hebrew',
            it: 'Italian',
            nl: 'Dutch',
            no: 'Norwegian',
            pt: 'Portuguese',
            ru: 'Russian',
            se: 'Swedish',
            ud: 'Urdu',
            zh: 'Chinese',
            hi: 'Hindi',
            ja: 'Japanese',
            ko: 'Korean',
            af: 'Afrikaans',
            th: 'Thai',
            vi: 'Vietnamese',
            tr: 'Turkish',
        };
        // Lista de fuentes por paÃ­s+idioma - Base de datos completa de medios internacionales
        const sourcesByCountryLang = {
            // ESTADOS UNIDOS (English)
            'us_en': [
                { value: 'any', label: 'ğŸŒŸ Any reliable source' },
                { value: 'cnn', label: 'CNN' },
                { value: 'fox-news', label: 'Fox News' },
                { value: 'nbc-news', label: 'NBC News' },
                { value: 'abc-news', label: 'ABC News' },
                { value: 'cbs-news', label: 'CBS News' },
                { value: 'msnbc', label: 'MSNBC' },
                { value: 'the-new-york-times', label: 'The New York Times' },
                { value: 'the-washington-post', label: 'The Washington Post' },
                { value: 'the-wall-street-journal', label: 'The Wall Street Journal' },
                { value: 'usa-today', label: 'USA Today' },
                { value: 'reuters', label: 'Reuters' },
                { value: 'associated-press', label: 'Associated Press' },
                { value: 'bloomberg', label: 'Bloomberg' },
                { value: 'politico', label: 'Politico' },
                { value: 'the-hill', label: 'The Hill' },
                { value: 'npr', label: 'NPR' },
                { value: 'pbs', label: 'PBS NewsHour' },
                { value: 'time', label: 'Time Magazine' },
                { value: 'newsweek', label: 'Newsweek' },
                { value: 'the-huffington-post', label: 'HuffPost' },
                { value: 'buzzfeed', label: 'BuzzFeed News' },
                { value: 'vox', label: 'Vox' },
                { value: 'axios', label: 'Axios' },
                { value: 'the-daily-beast', label: 'The Daily Beast' }
            ],
            
            // REINO UNIDO (English)
            'gb_en': [
                { value: 'any', label: 'ğŸŒŸ Any reliable source' },
                { value: 'bbc-news', label: 'BBC News' },
                { value: 'the-guardian-uk', label: 'The Guardian' },
                { value: 'independent', label: 'The Independent' },
                { value: 'the-telegraph', label: 'The Telegraph' },
                { value: 'daily-mail', label: 'Daily Mail' },
                { value: 'the-times', label: 'The Times' },
                { value: 'sky-news', label: 'Sky News' },
                { value: 'itv-news', label: 'ITV News' },
                { value: 'channel-4-news', label: 'Channel 4 News' },
                { value: 'financial-times', label: 'Financial Times' },
                { value: 'the-economist', label: 'The Economist' },
                { value: 'reuters-uk', label: 'Reuters UK' },
                { value: 'metro-uk', label: 'Metro UK' },
                { value: 'evening-standard', label: 'Evening Standard' },
                { value: 'the-sun', label: 'The Sun' },
                { value: 'mirror', label: 'Mirror' },
                { value: 'express', label: 'Express' },
                { value: 'the-star', label: 'The Star' },
                { value: 'huffpost-uk', label: 'HuffPost UK' },
                { value: 'buzzfeed-uk', label: 'BuzzFeed UK' }
            ],
            
            // CANADÃ (English)
            'ca_en': [
                { value: 'any', label: 'ğŸŒŸ Any reliable source' },
                { value: 'cbc-news', label: 'CBC News' },
                { value: 'ctv-news', label: 'CTV News' },
                { value: 'global-news', label: 'Global News' },
                { value: 'national-post', label: 'National Post' },
                { value: 'the-globe-and-mail', label: 'The Globe and Mail' },
                { value: 'toronto-star', label: 'Toronto Star' },
                { value: 'montreal-gazette', label: 'Montreal Gazette' },
                { value: 'vancouver-sun', label: 'Vancouver Sun' },
                { value: 'edmonton-journal', label: 'Edmonton Journal' },
                { value: 'calgary-herald', label: 'Calgary Herald' },
                { value: 'ottawa-citizen', label: 'Ottawa Citizen' },
                { value: 'winnipeg-free-press', label: 'Winnipeg Free Press' },
                { value: 'the-province', label: 'The Province' },
                { value: 'toronto-sun', label: 'Toronto Sun' },
                { value: 'huffpost-canada', label: 'HuffPost Canada' },
                { value: 'cbc-sports', label: 'CBC Sports' },
                { value: 'tsn', label: 'TSN' },
                { value: 'sportsnet', label: 'Sportsnet' },
                { value: 'macleans', label: "Maclean's" },
                { value: 'canoe', label: 'Canoe.com' }
            ],
            
            // CANADÃ (French)
            'ca_fr': [
                { value: 'any', label: 'ğŸŒŸ Any reliable source' },
                { value: 'radio-canada', label: 'Radio-Canada' },
                { value: 'tva-nouvelles', label: 'TVA Nouvelles' },
                { value: 'la-presse', label: 'La Presse' },
                { value: 'le-devoir', label: 'Le Devoir' },
                { value: 'journal-de-montreal', label: 'Journal de MontrÃ©al' },
                { value: 'journal-de-quebec', label: 'Journal de QuÃ©bec' },
                { value: 'le-soleil', label: 'Le Soleil' },
                { value: 'la-tribune', label: 'La Tribune' },
                { value: 'le-nouvelliste', label: 'Le Nouvelliste' },
                { value: 'l-actualite', label: "L'actualitÃ©" },
                { value: 'le-figaro-canada', label: 'Le Figaro Canada' },
                { value: 'ici-radio-canada', label: 'ICI Radio-Canada' },
                { value: 'noovo-info', label: 'Noovo Info' },
                { value: 'rds', label: 'RDS' },
                { value: 'tva-sports', label: 'TVA Sports' }
            ],
            
            // FRANCIA (French)
            'fr_fr': [
                { value: 'any', label: 'ğŸŒŸ Any reliable source' },
                { value: 'le-monde', label: 'Le Monde' },
                { value: 'le-figaro', label: 'Le Figaro' },
                { value: 'liberation', label: 'LibÃ©ration' },
                { value: 'le-parisien', label: 'Le Parisien' },
                { value: 'france24', label: 'France 24' },
                { value: 'bfm-tv', label: 'BFM TV' },
                { value: 'tf1-info', label: 'TF1 Info' },
                { value: 'france2', label: 'France 2' },
                { value: 'france-inter', label: 'France Inter' },
                { value: 'rtl', label: 'RTL' },
                { value: 'europe1', label: 'Europe 1' },
                { value: 'franceinfo', label: 'Franceinfo' },
                { value: 'lemonde-diplomatique', label: 'Le Monde Diplomatique' },
                { value: 'nouvel-obs', label: 'Le Nouvel Observateur' },
                { value: 'l-express', label: "L'Express" },
                { value: 'marianne', label: 'Marianne' },
                { value: 'charlie-hebdo', label: 'Charlie Hebdo' },
                { value: 'le-point', label: 'Le Point' },
                { value: 'l-equipe', label: "L'Ã‰quipe" },
                { value: 'les-echos', label: 'Les Ã‰chos' },
                { value: 'ouest-france', label: 'Ouest-France' }
            ],
            
            // ALEMANIA (German)
            'de_de': [
                { value: 'any', label: 'ğŸŒŸ Any reliable source' },
                { value: 'spiegel', label: 'Der Spiegel' },
                { value: 'bild', label: 'Bild' },
                { value: 'zeit', label: 'Die Zeit' },
                { value: 'faz', label: 'Frankfurter Allgemeine Zeitung' },
                { value: 'sueddeutsche', label: 'SÃ¼ddeutsche Zeitung' },
                { value: 'welt', label: 'Die Welt' },
                { value: 'focus', label: 'Focus' },
                { value: 'stern', label: 'Stern' },
                { value: 'ard', label: 'ARD' },
                { value: 'zdf', label: 'ZDF' },
                { value: 'rtl-news', label: 'RTL News' },
                { value: 'n-tv', label: 'n-tv' },
                { value: 'deutsche-welle', label: 'Deutsche Welle' },
                { value: 'tagesschau', label: 'Tagesschau' },
                { value: 'handelsblatt', label: 'Handelsblatt' },
                { value: 'frankfurter-rundschau', label: 'Frankfurter Rundschau' },
                { value: 'tagesspiegel', label: 'Der Tagesspiegel' },
                { value: 'berliner-zeitung', label: 'Berliner Zeitung' },
                { value: 'taz', label: 'taz' },
                { value: 'kicker', label: 'Kicker' },
                { value: 'sport1', label: 'Sport1' }
            ],
            
            // ESPAÃ‘A (Spanish)
            'es_es': [
                { value: 'any', label: 'ğŸŒŸ Any reliable source' },
                { value: 'el-pais', label: 'El PaÃ­s' },
                { value: 'el-mundo', label: 'El Mundo' },
                { value: 'abc-espana', label: 'ABC EspaÃ±a' },
                { value: 'la-vanguardia', label: 'La Vanguardia' },
                { value: 'el-periodico', label: 'El PeriÃ³dico' },
                { value: 'marca', label: 'Marca' },
                { value: 'as', label: 'AS' },
                { value: 'sport', label: 'Sport' },
                { value: 'mundo-deportivo', label: 'Mundo Deportivo' },
                { value: 'rtve', label: 'RTVE' },
                { value: 'antena3', label: 'Antena 3' },
                { value: 'telecinco', label: 'Telecinco' },
                { value: 'la-sexta', label: 'La Sexta' },
                { value: 'cuatro', label: 'Cuatro' },
                { value: 'el-confidencial', label: 'El Confidencial' },
                { value: 'publico', label: 'PÃºblico' },
                { value: 'eldiario-es', label: 'elDiario.es' },
                { value: 'ok-diario', label: 'OK Diario' },
                { value: 'la-razon', label: 'La RazÃ³n' },
                { value: 'el-espanol', label: 'El EspaÃ±ol' },
                { value: '20-minutos', label: '20 Minutos' }
            ],
            
            // ITALIA (Italian)
            'it_it': [
                { value: 'any', label: 'ğŸŒŸ Any reliable source' },
                { value: 'corriere-della-sera', label: 'Corriere della Sera' },
                { value: 'la-repubblica', label: 'La Repubblica' },
                { value: 'la-gazzetta-dello-sport', label: 'La Gazzetta dello Sport' },
                { value: 'la-stampa', label: 'La Stampa' },
                { value: 'il-sole-24-ore', label: 'Il Sole 24 Ore' },
                { value: 'rai-news', label: 'Rai News' },
                { value: 'mediaset', label: 'Mediaset' },
                { value: 'sky-tg24', label: 'Sky TG24' },
                { value: 'la7', label: 'La7' },
                { value: 'ansa', label: 'ANSA' },
                { value: 'il-giornale', label: 'Il Giornale' },
                { value: 'il-fatto-quotidiano', label: 'Il Fatto Quotidiano' },
                { value: 'huffpost-italy', label: 'HuffPost Italia' },
                { value: 'fanpage', label: 'Fanpage' },
                { value: 'tuttosport', label: 'Tuttosport' },
                { value: 'corriere-dello-sport', label: 'Corriere dello Sport' },
                { value: 'agi', label: 'AGI' },
                { value: 'adnkronos', label: 'Adnkronos' },
                { value: 'il-messaggero', label: 'Il Messaggero' },
                { value: 'tgcom24', label: 'Tgcom24' },
                { value: 'il-tempo', label: 'Il Tempo' }
            ],
            
            // JAPÃ“N (Japanese)
            'jp_ja': [
                { value: 'any', label: 'ğŸŒŸ Any reliable source' },
                { value: 'nhk', label: 'NHK News' },
                { value: 'asahi', label: 'Asahi Shimbun' },
                { value: 'mainichi', label: 'Mainichi Shimbun' },
                { value: 'yomiuri', label: 'Yomiuri Shimbun' },
                { value: 'nikkei', label: 'Nikkei' },
                { value: 'sankei', label: 'Sankei Shimbun' },
                { value: 'kyodo', label: 'Kyodo News' },
                { value: 'jiji', label: 'Jiji Press' },
                { value: 'tbs-news', label: 'TBS News' },
                { value: 'fuji-tv', label: 'Fuji TV' },
                { value: 'tv-asahi', label: 'TV Asahi' },
                { value: 'ntv', label: 'Nippon TV' },
                { value: 'tv-tokyo', label: 'TV Tokyo' },
                { value: 'tokyo-shimbun', label: 'Tokyo Shimbun' },
                { value: 'chunichi', label: 'Chunichi Shimbun' },
                { value: 'hokkaido', label: 'Hokkaido Shimbun' },
                { value: 'sports-nippon', label: 'Sports Nippon' },
                { value: 'sponichi', label: 'Sponichi' },
                { value: 'nikkan-sports', label: 'Nikkan Sports' },
                { value: 'hochi', label: 'Sports Hochi' },
                { value: 'yahoo-japan', label: 'Yahoo! Japan News' }
            ],
            
            // CHINA (Chinese)
            'cn_zh': [
                { value: 'any', label: 'ğŸŒŸ Any reliable source' },
                { value: 'xinhua', label: 'Xinhua News' },
                { value: 'peoples-daily', label: "People's Daily" },
                { value: 'cctv', label: 'CCTV' },
                { value: 'cgtn', label: 'CGTN' },
                { value: 'china-daily-cn', label: 'China Daily (ä¸­æ–‡)' },
                { value: 'beijing-news', label: 'Beijing News' },
                { value: 'southern-daily', label: 'Southern Daily' },
                { value: 'guangming-daily', label: 'Guangming Daily' },
                { value: 'economic-daily', label: 'Economic Daily' },
                { value: 'china-youth-daily', label: 'China Youth Daily' },
                { value: 'workers-daily', label: "Workers' Daily" },
                { value: 'legal-daily', label: 'Legal Daily' },
                { value: 'science-technology-daily', label: 'Science & Technology Daily' },
                { value: 'china-education-daily', label: 'China Education Daily' },
                { value: 'health-news', label: 'Health News' },
                { value: 'china-sports-daily', label: 'China Sports Daily' },
                { value: 'china-culture-daily', label: 'China Culture Daily' },
                { value: 'china-environment-news', label: 'China Environment News' },
                { value: 'china-tourism-news', label: 'China Tourism News' },
                { value: 'china-transport-news', label: 'China Transport News' },
                { value: 'sina-news', label: 'Sina News' }
            ],
            
            // CHINA (English)
            'cn_en': [
                { value: 'any', label: 'ğŸŒŸ Any reliable source' },
                { value: 'china-daily', label: 'China Daily' },
                { value: 'cgtn-english', label: 'CGTN English' },
                { value: 'xinhua-english', label: 'Xinhua English' },
                { value: 'global-times', label: 'Global Times' },
                { value: 'shanghai-daily', label: 'Shanghai Daily' },
                { value: 'china-plus', label: 'China Plus' },
                { value: 'ecns', label: 'ECNS' },
                { value: 'chinadaily-com', label: 'ChinaDaily.com' },
                { value: 'peoples-daily-english', label: "People's Daily English" },
                { value: 'beijing-review', label: 'Beijing Review' }
            ],
            
            // INDIA (English)
            'in_en': [
                { value: 'any', label: 'ğŸŒŸ Any reliable source' },
                { value: 'times-of-india', label: 'Times of India' },
                { value: 'hindustan-times', label: 'Hindustan Times' },
                { value: 'the-hindu', label: 'The Hindu' },
                { value: 'indian-express', label: 'Indian Express' },
                { value: 'ndtv', label: 'NDTV' },
                { value: 'zee-news', label: 'Zee News' },
                { value: 'india-today', label: 'India Today' },
                { value: 'cnn-news18', label: 'CNN-News18' },
                { value: 'news18', label: 'News18' },
                { value: 'republic-tv', label: 'Republic TV' },
                { value: 'times-now', label: 'Times Now' },
                { value: 'aaj-tak-english', label: 'Aaj Tak English' },
                { value: 'business-standard', label: 'Business Standard' },
                { value: 'economic-times', label: 'Economic Times' },
                { value: 'mint', label: 'Mint' },
                { value: 'moneycontrol', label: 'Moneycontrol' },
                { value: 'deccan-herald', label: 'Deccan Herald' },
                { value: 'deccan-chronicle', label: 'Deccan Chronicle' },
                { value: 'telegraph-india', label: 'Telegraph India' },
                { value: 'firstpost', label: 'Firstpost' },
                { value: 'the-quint', label: 'The Quint' }
            ],
            
            // BRASIL (Portuguese)
            'br_pt': [
                { value: 'any', label: 'ğŸŒŸ Any reliable source' },
                { value: 'folha-de-sao-paulo', label: 'Folha de S.Paulo' },
                { value: 'o-globo', label: 'O Globo' },
                { value: 'estadao', label: 'EstadÃ£o' },
                { value: 'uol', label: 'UOL' },
                { value: 'g1', label: 'G1' },
                { value: 'band-news', label: 'Band News' },
                { value: 'sbt-news', label: 'SBT News' },
                { value: 'record-tv', label: 'Record TV' },
                { value: 'cnn-brasil', label: 'CNN Brasil' },
                { value: 'jovem-pan', label: 'Jovem Pan' },
                { value: 'veja', label: 'Veja' },
                { value: 'epoca', label: 'Ã‰poca' },
                { value: 'istoÃ©', label: 'IstoÃ‰' },
                { value: 'carta-capital', label: 'Carta Capital' },
                { value: 'brasil-247', label: 'Brasil 247' },
                { value: 'correio-braziliense', label: 'Correio Braziliense' },
                { value: 'zero-hora', label: 'Zero Hora' },
                { value: 'diario-de-pernambuco', label: 'DiÃ¡rio de Pernambuco' },
                { value: 'o-dia', label: 'O Dia' },
                { value: 'lance', label: 'Lance!' },
                { value: 'globo-esporte', label: 'Globo Esporte' }
            ],
            
            // AUSTRALIA (English)
            'au_en': [
                { value: 'any', label: 'ğŸŒŸ Any reliable source' },
                { value: 'abc-news-au', label: 'ABC News Australia' },
                { value: 'sbs-news', label: 'SBS News' },
                { value: 'nine-news', label: 'Nine News' },
                { value: 'seven-news', label: 'Seven News' },
                { value: 'ten-news', label: 'Ten News' },
                { value: 'sky-news-australia', label: 'Sky News Australia' },
                { value: 'the-australian', label: 'The Australian' },
                { value: 'sydney-morning-herald', label: 'Sydney Morning Herald' },
                { value: 'the-age', label: 'The Age' },
                { value: 'herald-sun', label: 'Herald Sun' },
                { value: 'daily-telegraph-au', label: 'Daily Telegraph Australia' },
                { value: 'courier-mail', label: 'Courier Mail' },
                { value: 'west-australian', label: 'West Australian' },
                { value: 'advertiser', label: 'The Advertiser' },
                { value: 'canberra-times', label: 'Canberra Times' },
                { value: 'northern-territory-news', label: 'NT News' },
                { value: 'australian-financial-review', label: 'Australian Financial Review' },
                { value: 'news-com-au', label: 'News.com.au' },
                { value: 'crikey', label: 'Crikey' },
                { value: 'the-conversation-au', label: 'The Conversation Australia' },
                { value: 'guardian-australia', label: 'Guardian Australia' }
            ],
            
            // RUSIA (Russian)
            'ru_ru': [
                { value: 'any', label: 'ğŸŒŸ Any reliable source' },
                { value: 'rt-russia', label: 'RT (Russia Today)' },
                { value: 'sputnik', label: 'Sputnik' },
                { value: 'tass', label: 'TASS' },
                { value: 'ria-novosti', label: 'RIA Novosti' },
                { value: 'interfax', label: 'Interfax' },
                { value: 'rossiyskaya-gazeta', label: 'Rossiyskaya Gazeta' },
                { value: 'izvestia', label: 'Izvestia' },
                { value: 'kommersant', label: 'Kommersant' },
                { value: 'vedomosti', label: 'Vedomosti' },
                { value: 'novaya-gazeta', label: 'Novaya Gazeta' },
                { value: 'lenta-ru', label: 'Lenta.ru' },
                { value: 'gazeta-ru', label: 'Gazeta.ru' },
                { value: 'mk', label: 'Moskovskij Komsomolets' },
                { value: 'kp', label: 'Komsomolskaya Pravda' },
                { value: 'arguments-facts', label: 'Arguments and Facts' },
                { value: 'rbc', label: 'RBC' },
                { value: 'echo-moscow', label: 'Echo of Moscow' },
                { value: 'meduza', label: 'Meduza' },
                { value: 'dozhd', label: 'TV Rain' },
                { value: 'channel-one', label: 'Channel One Russia' },
                { value: 'ntv-ru', label: 'NTV Russia' }
            ],
            
            // MÃ‰XICO (Spanish)
            'mx_es': [
                { value: 'any', label: 'ğŸŒŸ Any reliable source' },
                { value: 'televisa', label: 'Televisa' },
                { value: 'tv-azteca', label: 'TV Azteca' },
                { value: 'milenio', label: 'Milenio' },
                { value: 'reforma', label: 'Reforma' },
                { value: 'el-universal-mx', label: 'El Universal' },
                { value: 'excelsior', label: 'ExcÃ©lsior' },
                { value: 'la-jornada', label: 'La Jornada' },
                { value: 'proceso', label: 'Proceso' },
                { value: 'animal-politico', label: 'Animal PolÃ­tico' },
                { value: 'el-financiero', label: 'El Financiero' },
                { value: 'expansion', label: 'ExpansiÃ³n' },
                { value: 'forbes-mexico', label: 'Forbes MÃ©xico' },
                { value: 'cnn-mexico', label: 'CNN MÃ©xico' },
                { value: 'aristegui-noticias', label: 'Aristegui Noticias' },
                { value: 'sin-embargo', label: 'Sin Embargo' },
                { value: 'el-economista', label: 'El Economista' },
                { value: 'record-mx', label: 'RÃ©cord MÃ©xico' },
                { value: 'medio-tiempo', label: 'Medio Tiempo' },
                { value: 'once-tv', label: 'Once TV' },
                { value: 'canal-22', label: 'Canal 22' },
                { value: 'mvs-noticias', label: 'MVS Noticias' }
            ],
            
            // ARGENTINA (Spanish)
            'ar_es': [
                { value: 'any', label: 'ğŸŒŸ Any reliable source' },
                { value: 'clarin', label: 'ClarÃ­n' },
                { value: 'la-nacion', label: 'La NaciÃ³n' },
                { value: 'pagina-12', label: 'PÃ¡gina/12' },
                { value: 'infobae', label: 'Infobae' },
                { value: 'ambito', label: 'Ãmbito' },
                { value: 'perfil', label: 'Perfil' },
                { value: 'cronica', label: 'CrÃ³nica' },
                { value: 'ole', label: 'OlÃ©' },
                { value: 'tyc-sports', label: 'TyC Sports' },
                { value: 'espn-argentina', label: 'ESPN Argentina' },
                { value: 'fox-sports-ar', label: 'Fox Sports Argentina' },
                { value: 'telefe', label: 'Telefe' },
                { value: 'canal-13-ar', label: 'Canal 13 Argentina' },
                { value: 'america-tv', label: 'AmÃ©rica TV' },
                { value: 'tn', label: 'TN - Todo Noticias' },
                { value: 'c5n', label: 'C5N' },
                { value: 'a24', label: 'A24' },
                { value: 'canal-26', label: 'Canal 26' },
                { value: 'cronista', label: 'El Cronista' },
                { value: 'minuto-uno', label: 'Minuto Uno' },
                { value: 'tiempo-argentino', label: 'Tiempo Argentino' }
            ],
            
            // SUIZA mÃºltiples idiomas
            'ch_de': [
                { value: 'any', label: 'ğŸŒŸ Any reliable source' },
                { value: 'nzz', label: 'Neue ZÃ¼rcher Zeitung' },
                { value: 'tages-anzeiger', label: 'Tages-Anzeiger' },
                { value: 'blick', label: 'Blick' },
                { value: '20-minuten', label: '20 Minuten' },
                { value: 'watson-ch', label: 'Watson.ch' },
                { value: 'srf', label: 'SRF' },
                { value: 'swissinfo-de', label: 'SWI swissinfo.ch (DE)' },
                { value: 'basellandschaftliche', label: 'Basellandschaftliche Zeitung' },
                { value: 'aargauer-zeitung', label: 'Aargauer Zeitung' },
                { value: 'st-galler-tagblatt', label: 'St. Galler Tagblatt' }
            ],
            'ch_fr': [
                { value: 'any', label: 'ğŸŒŸ Any reliable source' },
                { value: 'le-temps', label: 'Le Temps' },
                { value: 'tribune-de-geneve', label: 'Tribune de GenÃ¨ve' },
                { value: '24-heures', label: '24 heures' },
                { value: 'le-matin', label: 'Le Matin' },
                { value: 'rts', label: 'RTS' },
                { value: 'swissinfo-fr', label: 'SWI swissinfo.ch (FR)' },
                { value: 'la-liberte', label: 'La LibertÃ©' },
                { value: 'arc-info', label: 'arcinfo' },
                { value: 'journal-du-jura', label: 'Journal du Jura' },
                { value: 'le-nouvelliste-ch', label: 'Le Nouvelliste' }
            ],
            'ch_it': [
                { value: 'any', label: 'ğŸŒŸ Any reliable source' },
                { value: 'corriere-del-ticino', label: 'Corriere del Ticino' },
                { value: 'la-regione', label: 'La Regione' },
                { value: 'giornale-del-popolo', label: 'Giornale del Popolo' },
                { value: 'rsi', label: 'RSI' },
                { value: 'swissinfo-it', label: 'SWI swissinfo.ch (IT)' },
                { value: 'tio', label: 'Tio.ch' },
                { value: 'lanostratv', label: 'LaNostraTV' }
            ],
            
            // HOLANDA (Dutch)
            'nl_nl': [
                { value: 'any', label: 'ğŸŒŸ Any reliable source' },
                { value: 'nos', label: 'NOS' },
                { value: 'rtl-nieuws', label: 'RTL Nieuws' },
                { value: 'telegraaf', label: 'De Telegraaf' },
                { value: 'volkskrant', label: 'de Volkskrant' },
                { value: 'ad', label: 'Algemeen Dagblad' },
                { value: 'nrc', label: 'NRC' },
                { value: 'trouw', label: 'Trouw' },
                { value: 'parool', label: 'Het Parool' },
                { value: 'financieele-dagblad', label: 'Het Financieele Dagblad' },
                { value: 'nu-nl', label: 'NU.nl' },
                { value: 'bnn-vara', label: 'BNNVara' },
                { value: 'veronica', label: 'Veronica' },
                { value: 'sbs6', label: 'SBS6' },
                { value: 'rtl4', label: 'RTL4' },
                { value: 'eo', label: 'EO' },
                { value: 'omroep-west', label: 'Omroep West' },
                { value: 'omroep-brabant', label: 'Omroep Brabant' },
                { value: 'rtvnh', label: 'NH Nieuws' },
                { value: 'tubantia', label: 'Tubantia' },
                { value: 'bnr', label: 'BNR Nieuwsradio' },
                { value: 'radio1', label: 'NPO Radio 1' }
            ],
            
            // Global/International sources
            global: [
                { value: 'any', label: 'ğŸŒŸ Any reliable source' },
                { value: 'bbc-news', label: 'BBC News' },
                { value: 'cnn-international', label: 'CNN International' },
                { value: 'reuters', label: 'Reuters' },
                { value: 'associated-press', label: 'Associated Press' },
                { value: 'al-jazeera-english', label: 'Al Jazeera English' },
                { value: 'france24-english', label: 'France 24 English' },
                { value: 'deutsche-welle-english', label: 'Deutsche Welle English' },
                { value: 'euronews', label: 'Euronews' },
                { value: 'bloomberg', label: 'Bloomberg' },
                { value: 'financial-times', label: 'Financial Times' },
                { value: 'the-economist', label: 'The Economist' },
                { value: 'time-international', label: 'Time International' },
                { value: 'newsweek-international', label: 'Newsweek International' },
                { value: 'guardian-international', label: 'The Guardian International' },
                { value: 'independent-international', label: 'The Independent International' }
            ]
        };

        document.getElementById('country_interest').addEventListener('change', function() {
            const country = this.value;
            const languageGroup = document.getElementById('language-group');
            const languageSelect = document.getElementById('language_interest');
            const sourcesGroup = document.getElementById('sources-group');
            const sourcesCheckboxes = document.getElementById('sources-checkboxes');
            sourcesCheckboxes.innerHTML = '';
            languageSelect.innerHTML = '';
            // Si el paÃ­s tiene varios idiomas, mostrar el selector de idioma
            if (countryLanguages[country] && countryLanguages[country].length > 1) {
                languageGroup.style.display = 'block';
                countryLanguages[country].forEach(lang => {
                    const option = document.createElement('option');
                    option.value = lang;
                    option.textContent = languageNames[lang] || lang;
                    languageSelect.appendChild(option);
                });
                // Disparar el evento para mostrar las fuentes del primer idioma por defecto
                languageSelect.dispatchEvent(new Event('change'));
            } else if (countryLanguages[country] && countryLanguages[country].length === 1) {
                languageGroup.style.display = 'none';
                const lang = countryLanguages[country][0];
                showSources(country, lang);
            } else {
                languageGroup.style.display = 'none';
                showSources(country, null);
            }
        });

        document.getElementById('language_interest').addEventListener('change', function() {
            const country = document.getElementById('country_interest').value;
            const lang = this.value;
            showSources(country, lang);
        });

        function showSources(country, lang) {
            const sourcesGroup = document.getElementById('sources-group');
            const sourcesCheckboxes = document.getElementById('sources-checkboxes');
            sourcesCheckboxes.innerHTML = '';
            let sources = [];
            
            // Determine which sources to show based on country and language
            const key = lang ? `${country}_${lang}` : country;
            if (sourcesByCountryLang[key]) {
                sources = sourcesByCountryLang[key];
            } else if (sourcesByCountryLang[country]) {
                sources = sourcesByCountryLang[country];
            } else {
                sources = sourcesByCountryLang['global'];
            }
            
            if (sources && sources.length > 0) {
                sources.forEach(source => {
                    const label = document.createElement('label');
                    label.className = 'checkbox-item';
                    
                    const checkbox = document.createElement('input');
                    checkbox.type = 'checkbox';
                    checkbox.name = 'sources';
                    checkbox.value = source.value;
                    checkbox.addEventListener('change', updateSelectedSources);
                    
                    const span = document.createElement('span');
                    span.textContent = source.label;
                    
                    label.appendChild(checkbox);
                    label.appendChild(span);
                    sourcesCheckboxes.appendChild(label);
                });
                sourcesGroup.style.display = 'block';
            } else {
                sourcesGroup.style.display = 'none';
            }
        }

        function updateSelectedSources() {
            const selectedSources = document.querySelectorAll('input[name="sources"]:checked');
            const selectedSourcesContainer = document.getElementById('selected-sources');
            const selectedSourcesList = document.getElementById('selected-sources-list');
            
            // Clear existing selected sources
            selectedSourcesList.innerHTML = '';
            
            if (selectedSources.length > 0) {
                selectedSources.forEach(checkbox => {
                    const sourceLabel = checkbox.parentElement.querySelector('span').textContent;
                    
                    const tag = document.createElement('div');
                    tag.className = 'selected-source-tag';
                    
                    const labelSpan = document.createElement('span');
                    labelSpan.textContent = sourceLabel;
                    
                    const removeBtn = document.createElement('button');
                    removeBtn.className = 'remove-source';
                    removeBtn.innerHTML = 'Ã—';
                    removeBtn.type = 'button';
                    removeBtn.addEventListener('click', () => {
                        checkbox.checked = false;
                        updateSelectedSources();
                    });
                    
                    tag.appendChild(labelSpan);
                    tag.appendChild(removeBtn);
                    selectedSourcesList.appendChild(tag);
                });
                selectedSourcesContainer.classList.add('show');
            } else {
                selectedSourcesContainer.classList.remove('show');
            }
        }

        // Form submission
        document.getElementById('preferencesForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const submitBtn = document.getElementById('submitBtn');
            const loading = document.getElementById('loading');
            const form = document.getElementById('preferencesForm');
            const successMessage = document.getElementById('successMessage');
            
            // Validate that at least one interest is selected
            const interests = document.querySelectorAll('input[name="interests"]:checked');
            if (interests.length === 0) {
                alert('Please select at least one topic of interest.');
                return;
            }
            
            // Show loading
            submitBtn.disabled = true;
            form.style.display = 'none';
            loading.style.display = 'block';
            
            // Generate unique client ID for personalization
            const clientId = generateClientId();
            
            // Collect form data
            const formData = new FormData(form);
            const selectedCountries = Array.from(document.querySelectorAll('input[name="countries"]:checked')).map(cb => cb.value);
            const selectedSources = Array.from(document.querySelectorAll('input[name="sources"]:checked')).map(cb => cb.value);
            const selectedInterests = Array.from(interests).map(cb => cb.value);
            
            // Process country and timezone data
            const countryTimezone = formData.get('country_timezone');
            const [countryName, timezone] = countryTimezone ? countryTimezone.split('|') : ['', ''];
            const countryCode = extractCountryCode(countryName);
            
            // Map sources to NewsAPI format
            const newsApiSources = mapToNewsApiSources(selectedSources, selectedCountries);
            
            // Prepare personalized data structure for n8n/NewsAPI
            const personalizedData = {
                // Client identification
                clientId: clientId,
                email: formData.get('email'),
                name: formData.get('name'),
                telegram: formData.get('telegram') || '',
                
                // News preferences for NewsAPI
                newsPreferences: {
                    topics: selectedInterests, // For NewsAPI category parameter
                    countries: selectedCountries.map(country => extractCountryCode(country)), // ISO country codes
                    sources: newsApiSources.validSources, // NewsAPI source IDs
                    language: detectLanguage(selectedCountries[0]), // Primary language for NewsAPI
                    frequency: formData.get('frequency'),
                },
                
                // Geographical data
                location: {
                    primaryCountry: countryCode,
                    timezone: timezone,
                    selectedCountries: selectedCountries
                },
                
                // Additional client data
                metadata: {
                    timestamp: new Date().toISOString(),
                    source: 'simply-news-survey',
                    version: '2.0',
                    invalidSources: newsApiSources.invalidSources, // For debugging
                    totalSourcesSelected: selectedSources.length,
                    browserLanguage: navigator.language,
                    userAgent: navigator.userAgent.substring(0, 100) // Truncated for privacy
                },
                
                // Comments
                comments: formData.get('comments') || '',
                
                // For n8n workflow routing
                workflowConfig: {
                    enablePersonalization: true,
                    createSchedule: true,
                    setupTelegramBot: formData.get('telegram') ? true : false,
                    clientType: 'survey_subscriber'
                }
            };
            
            try {
                // Primary webhook for client data and workflow setup
                const webhookUrl = 'https://your-n8n-instance.com/webhook/simply-news-client-setup';
                
                const response = await fetch(webhookUrl, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'X-Client-ID': clientId,
                        'X-Source': 'simply-news-survey'
                    },
                    body: JSON.stringify(personalizedData)
                });
                
                if (response.ok) {
                    const result = await response.json();
                    
                    // Show success message
                    loading.style.display = 'none';
                    successMessage.style.display = 'block';
                    
                    // Store client ID in localStorage for future reference
                    localStorage.setItem('simply_news_client_id', clientId);
                    localStorage.setItem('simply_news_setup_date', new Date().toISOString());
                    
                    // Optional: send to Google Analytics
                    if (typeof gtag !== 'undefined') {
                        gtag('event', 'survey_submitted', {
                            'event_category': 'engagement',
                            'event_label': 'preferences_survey',
                            'custom_parameters': {
                                'client_id': clientId,
                                'sources_count': selectedSources.length,
                                'countries_count': selectedCountries.length,
                                'interests_count': selectedInterests.length
                            }
                        });
                    }
                    
                    // Optional: Test NewsAPI connection (for debugging)
                    if (result.testMode === true) {
                        testNewsApiConnection(personalizedData.newsPreferences);
                    }
                    
                } else {
                    throw new Error(`Server error: ${response.status}`);
                }
                
            } catch (error) {
                console.error('Error:', error);
                alert('There was an error sending your preferences. Please try again.');
                
                // Restore form
                loading.style.display = 'none';
                form.style.display = 'block';
                submitBtn.disabled = false;
            }
        });
        
        // Helper functions for NewsAPI integration
        function generateClientId() {
            const timestamp = Date.now();
            const random = Math.random().toString(36).substr(2, 9);
            return `sn_${timestamp}_${random}`;
        }
        
        function extractCountryCode(countryString) {
            if (!countryString) return '';
            // Extract country code from format "ğŸ‡ºğŸ‡¸ United States"
            const match = countryString.match(/ğŸ‡ºğŸ‡¸|ğŸ‡¬ğŸ‡§|ğŸ‡¨ğŸ‡¦|ğŸ‡«ğŸ‡·|ğŸ‡©ğŸ‡ª|ğŸ‡ªğŸ‡¸|ğŸ‡®ğŸ‡¹|ğŸ‡¯ğŸ‡µ|ğŸ‡¨ğŸ‡³|ğŸ‡®ğŸ‡³|ğŸ‡§ğŸ‡·|ğŸ‡¦ğŸ‡º|ğŸ‡·ğŸ‡º|ğŸ‡²ğŸ‡½|ğŸ‡¦ğŸ‡·|ğŸ‡¨ğŸ‡­|ğŸ‡³ğŸ‡±/);
            
            const flagToCode = {
                'ğŸ‡ºğŸ‡¸': 'us', 'ğŸ‡¬ğŸ‡§': 'gb', 'ğŸ‡¨ğŸ‡¦': 'ca', 'ğŸ‡«ğŸ‡·': 'fr', 'ğŸ‡©ğŸ‡ª': 'de',
                'ğŸ‡ªğŸ‡¸': 'es', 'ğŸ‡®ğŸ‡¹': 'it', 'ğŸ‡¯ğŸ‡µ': 'jp', 'ğŸ‡¨ğŸ‡³': 'cn', 'ğŸ‡®ğŸ‡³': 'in',
                'ğŸ‡§ğŸ‡·': 'br', 'ğŸ‡¦ğŸ‡º': 'au', 'ğŸ‡·ğŸ‡º': 'ru', 'ğŸ‡²ğŸ‡½': 'mx', 'ğŸ‡¦ğŸ‡·': 'ar',
                'ğŸ‡¨ğŸ‡­': 'ch', 'ğŸ‡³ğŸ‡±': 'nl'
            };
            
            return match ? flagToCode[match[0]] : '';
        }
        
        function detectLanguage(countryString) {
            const countryCode = extractCountryCode(countryString);
            const countryToLanguage = {
                'us': 'en', 'gb': 'en', 'ca': 'en', 'au': 'en',
                'fr': 'fr', 'de': 'de', 'es': 'es', 'it': 'it',
                'jp': 'ja', 'cn': 'zh', 'in': 'en', 'br': 'pt',
                'ru': 'ru', 'mx': 'es', 'ar': 'es', 'ch': 'de', 'nl': 'nl'
            };
            
            return countryToLanguage[countryCode] || 'en';
        }
        
        function mapToNewsApiSources(selectedSources, selectedCountries) {
            // Map our internal source IDs to actual NewsAPI source IDs
            const newsApiSourceMap = {
                // US Sources
                'cnn': 'cnn',
                'fox-news': 'fox-news',
                'nbc-news': 'nbc-news',
                'abc-news': 'abc-news',
                'cbs-news': 'cbs-news',
                'the-new-york-times': 'the-new-york-times',
                'the-washington-post': 'the-washington-post',
                'the-wall-street-journal': 'the-wall-street-journal',
                'usa-today': 'usa-today',
                'reuters': 'reuters',
                'associated-press': 'associated-press',
                'bloomberg': 'bloomberg',
                'politico': 'politico',
                'the-hill': 'the-hill',
                'time': 'time',
                'newsweek': 'newsweek',
                
                // UK Sources
                'bbc-news': 'bbc-news',
                'the-guardian-uk': 'the-guardian-uk',
                'independent': 'independent',
                'daily-mail': 'daily-mail',
                'financial-times': 'financial-times',
                'the-economist': 'the-economist',
                
                // Other major international sources
                'al-jazeera-english': 'al-jazeera-english',
                'france24': 'france24',
                'deutsche-welle': 'deutsche-welle',
                
                // Add more mappings as needed...
                // Note: Many sources might not be in NewsAPI, we'll handle this
            };
            
            const validSources = [];
            const invalidSources = [];
            
            selectedSources.forEach(source => {
                if (source === 'any') {
                    // 'any' means use NewsAPI without source restriction
                    return;
                }
                
                if (newsApiSourceMap[source]) {
                    validSources.push(newsApiSourceMap[source]);
                } else {
                    invalidSources.push(source);
                }
            });
            
            return {
                validSources: validSources,
                invalidSources: invalidSources,
                useAnySource: selectedSources.includes('any')
            };
        }
        
        // Optional: Test NewsAPI connection (for development/debugging)
        async function testNewsApiConnection(newsPreferences) {
            try {
                const testUrl = '/api/test-newsapi'; // Your backend endpoint
                const testData = {
                    sources: newsPreferences.sources.slice(0, 5), // Test with first 5 sources
                    topics: newsPreferences.topics.slice(0, 2), // Test with first 2 topics
                    countries: newsPreferences.countries.slice(0, 1), // Test with first country
                    language: newsPreferences.language
                };
                
                const response = await fetch(testUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(testData)
                });
                
                if (response.ok) {
                    const result = await response.json();
                    console.log('NewsAPI test successful:', result);
                } else {
                    console.warn('NewsAPI test failed:', response.status);
                }
            } catch (error) {
                console.warn('NewsAPI test error:', error);
            }
        }
    </script>
</body>
</html> 